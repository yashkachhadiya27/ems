<div class="changebac">
  <div mat-dialog-title class="fs-4 text-center">Verify OTP</div>
  <div mat-dialog-content>
    <div class="container">
      <div class="row">
        <form
          [formGroup]="verifyOtpForm"
          (ngSubmit)="submitVerifyOtpForm()"
          enctype="multipart/form-data"
        >
          <div class="row ms-5">
            <label class="form-label fs-5 fw-medium mt-2">OTP</label>
            <div class="col-8">
              <input
                type="number"
                class="form-control form-md-control-md bg-light fs-6"
                placeholder="OTP"
                name="otp"
                id="otp"
                maxlength="6"
                formControlName="otp"
                [ngClass]="{'is-valid':(otp.touched || otp.dirty)&&!(otp.errors?.['required'] || (otp.errors?.['pattern'])),'is-invalid':((otp.touched||otp.dirty) && (otp.errors?.['required'] || (otp.errors?.['pattern'])))}"
              />
              @if ((otp.touched || otp.dirty) && otp.errors?.['required']) {
              <div class="invalid-feedback ps-1">*OTP Required.</div>
              } @if (otp.errors?.['pattern']&&(otp.touched || otp.dirty)) {
              <div class="invalid-feedback mb-1 ps-1">*OTP is Invalid.</div>
              } @if(countdown()>0) {
              <span class="mt-2 text-danger"
                >OTP expired in : {{ formatTime(countdown()) }}</span
              >}
            </div>
            <div class="col-4 mt-1">
              <button
                type="submit"
                mat-raised-button
                color="primary"
                [disabled]="!this.verifyOtpForm.valid"
              >
                Verify
              </button>
              @if (isResendBtnVisible()) {
              <button
                mat-raised-button
                color="primary"
                class="ms-2"
                type="button"
                (click)="resendOtp()"
              >
                Resend
              </button>
              }
            </div>
          </div>
        </form>
      </div>
      @if (isLoading()) {
      <div class="row">
        <div class="loader m-auto mt-3"></div>
      </div>
      }
    </div>
    <div mat-dialog-actions>
      <button
        mat-raised-button
        mat-dialog-close
        color="warn"
        class="m-auto mt-3"
      >
        Close
      </button>
    </div>
  </div>
</div>
